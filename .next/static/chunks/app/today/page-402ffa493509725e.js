(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{1140:function(e,t,r){Promise.resolve().then(r.bind(r,4342)),Promise.resolve().then(r.bind(r,2572)),Promise.resolve().then(r.bind(r,1648))},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:r,strokeWidth:c?24*Number(i)/Number(n):i,className:a("lucide",o),...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:c,...o}=r;return(0,s.createElement)(i,{ref:l,iconNode:t,className:a("lucide-".concat(n(e)),c),...o})});return r.displayName="".concat(e),r}},401:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2934:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4342:function(e,t,r){"use strict";r.d(t,{Shell:function(){return u}});var s=r(7437),n=r(2265),a=r(7648),l=r(9376),i=r(2381),c=r(8933),o=r(3448);let d=[{href:"/calendar",label:"Calendario"},{href:"/today",label:"Hoy"},{href:"/patients",label:"Pacientes"},{href:"/settings",label:"Automatizaci\xf3n"}];function u(e){let{children:t,hideNav:r=!1}=e,u=(0,l.useRouter)(),m=(0,l.usePathname)(),[f,x]=(0,n.useState)(!1),h=async()=>{if(!f){x(!0);try{let e=(0,c.o)(),{error:t}=await e.auth.signOut();if(t)throw t;u.replace("/login"),u.refresh()}catch(e){console.error("Error signing out",e),x(!1)}}};return(0,s.jsxs)("div",{className:"flex min-h-screen flex-col gap-8",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm uppercase tracking-[0.3em] text-slate-500",children:"Agend.ar"}),(0,s.jsx)("h1",{className:"text-3xl font-semibold",children:"Autopilot"})]}),!r&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("nav",{className:"flex gap-4 rounded-full border border-slate-200 bg-white/70 px-4 py-2 backdrop-blur",children:d.map(e=>(0,s.jsx)(a.default,{href:e.href,className:(0,o.cn)("rounded-full px-3 py-1 text-sm font-medium transition",(null==m?void 0:m.startsWith(e.href))?"bg-slate-900 text-white":"text-slate-500 hover:text-slate-900"),children:e.label},e.href))}),(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:h,disabled:f,children:f?"Saliendo...":"Cerrar sesi\xf3n"})]})]}),t]})}},2572:function(e,t,r){"use strict";r.d(t,{LocationSwitcher:function(){return i}});var s=r(7437),n=r(2265),a=r(9376),l=r(5291);function i(e){let{locations:t,activeId:r}=e,i=(0,a.useRouter)(),c=(0,a.useSearchParams)(),[o,d]=(0,n.useTransition)();return t.length<=1?null:(0,s.jsx)(l.P,{value:r,onChange:e=>{var t;return t=e.target.value,void d(()=>{let e=new URLSearchParams(c.toString());e.set("location",t),i.push("?".concat(e.toString()))})},disabled:o,children:t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})}},1648:function(e,t,r){"use strict";r.d(t,{TodayInbox:function(){return h}});var s=r(7437),n=r(9376),a=r(2265),l=r(2381),i=r(9820),c=r(2934),o=r(1723),d=r(9205);let u=(0,d.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var m=r(401),f=r(2489);let x=(0,d.Z)("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);function h(e){let{items:t}=e,[r,d]=(0,a.useState)(null),[h,p]=(0,a.useState)(t),b=(0,n.useRouter)(),g={confirmed:{label:"Confirmado",className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-700"},pending:{label:"Pendiente",className:"inline-flex items-center rounded-full bg-amber-100 px-2.5 py-0.5 text-xs font-medium text-amber-700"},risk:{label:"En riesgo",className:"inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-700"}},j=h.reduce((e,t)=>(e[t.status]+=1,e),{confirmed:0,pending:0,risk:0});async function v(e){d(e.id);try{let r="confirm"===e.action?"confirm":"cancel",s=await fetch("/api/appointments/".concat(e.id,"/").concat(r),{method:"POST"});if(!s.ok){var t;let e=await s.json().catch(()=>({}));alert(null!==(t=e.error)&&void 0!==t?t:"No se pudo actualizar el turno");return}p(t=>"confirm"===e.action?t.map(t=>t.id===e.id?{...t,status:"confirmed",action:"cancel"}:t):t.filter(t=>t.id!==e.id)),b.refresh()}finally{d(null)}}return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Confirmados"}),(0,s.jsx)(c.Z,{className:"h-4 w-4 text-green-500"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:j.confirmed}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Pacientes listos para hoy"})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Pendientes"}),(0,s.jsx)(o.Z,{className:"h-4 w-4 text-yellow-500"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:j.pending}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Requieren atenci\xf3n"})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"En Riesgo"}),(0,s.jsx)(u,{className:"h-4 w-4 text-red-500"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:j.risk}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Probable ausentismo"})]})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsx)(i.ll,{children:"Agenda del D\xeda"}),(0,s.jsx)(i.SZ,{children:"Gestiona los turnos y confirmaciones para la jornada de hoy."})]}),(0,s.jsx)(i.aY,{className:"space-y-4",children:h.length>0?h.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-slate-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-12 w-12 rounded-lg bg-blue-50 text-blue-700 font-bold border border-blue-100",children:(0,s.jsx)("span",{className:"text-sm",children:e.time})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-slate-900",children:e.patient}),(0,s.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,s.jsx)("span",{className:g[e.status].className,children:g[e.status].label})})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(l.z,{variant:"cancel"===e.action?"ghost":"primary",size:"sm",className:"cancel"===e.action?"text-red-600 hover:text-red-700 hover:bg-red-50":"bg-blue-600 hover:bg-blue-700",onClick:()=>v(e),disabled:r===e.id,children:r===e.id?"...":"confirm"===e.action?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4"})," Confirmar"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4"})," Cancelar"]})})})]},e.id)):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center text-slate-500",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-slate-100 flex items-center justify-center mb-3",children:(0,s.jsx)(x,{className:"h-6 w-6 text-slate-400"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-slate-900",children:"Todo al d\xeda"}),(0,s.jsx)("p",{children:"No hay turnos pendientes de gesti\xf3n para hoy."})]})})]})]})}},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return i},z:function(){return c}});var s=r(7437),n=r(535),a=r(2265),l=r(3448);let i=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-brand-600 text-white hover:bg-brand-500",outline:"border border-slate-200 bg-white text-slate-900 hover:bg-slate-50",ghost:"text-slate-600 hover:bg-slate-100",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200",destructive:"bg-red-600 text-white hover:bg-red-500"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3",lg:"h-12 px-6 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"primary",size:"default"}}),c=(0,a.forwardRef)((e,t)=>{let{className:r,variant:n,size:a,...c}=e;return(0,s.jsx)("button",{ref:t,className:(0,l.cn)(i({variant:n,size:a,className:r})),...c})});c.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},ll:function(){return c}});var s=r(7437),n=r(2265),a=r(3448);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-2xl border border-slate-200 bg-white/90 shadow-[0_10px_40px_-20px_rgba(15,23,42,0.4)] backdrop-blur",r),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...n})});c.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});o.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},5291:function(e,t,r){"use strict";r.d(t,{P:function(){return a}});var s=r(7437),n=r(3448);function a(e){let{className:t,children:r,...a}=e;return(0,s.jsx)("select",{className:(0,n.cn)("flex h-10 w-full rounded-lg border border-slate-200 bg-white px-3 text-sm text-slate-900 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",t),...a,children:r})}},8933:function(e,t,r){"use strict";r.d(t,{o:function(){return n}});var s=r(5452);function n(){return(0,s.createClientComponentClient)()}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[851,679,971,117,744],function(){return e(e.s=1140)}),_N_E=e.O()}]);