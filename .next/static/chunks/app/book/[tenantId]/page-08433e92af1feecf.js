(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{8395:function(e,t,s){Promise.resolve().then(s.bind(s,7970))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...x}=e;return(0,a.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:s,strokeWidth:o?24*Number(n)/Number(r):n,className:l("lucide",d),...x},[...u.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{className:o,...d}=s;return(0,a.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(r(e)),o),...d})});return s.displayName="".concat(e),s}},7970:function(e,t,s){"use strict";s.d(t,{BookingFlow:function(){return m}});var a=s(7437),r=s(2265),l=s(7107),i=s(3292),n=s(6291),o=s(2381),d=s(279),c=s(3675),u=s(3448);let x=["from-rose-500/20","from-sky-500/20","from-emerald-500/20","from-indigo-500/20"];function h(e){return e&&null!==e.price_minor_units?new Intl.NumberFormat("es-AR",{style:"currency",currency:e.currency,minimumFractionDigits:0}).format(e.price_minor_units/100):"Consultar"}function m(e){var t,s,m,p,b,f,g;let{tenantId:v,tenantName:w,services:N,providers:j,locations:y}=e,[_,k]=(0,r.useState)(null!==(m=null===(t=N[0])||void 0===t?void 0:t.id)&&void 0!==m?m:null),[S,C]=(0,r.useState)(null),[E,I]=(0,r.useState)(null!==(p=null===(s=y[0])||void 0===s?void 0:s.id)&&void 0!==p?p:""),[A,M]=(0,r.useState)(new Date),[R,P]=(0,r.useState)([]),[W,L]=(0,r.useState)(null),[O,z]=(0,r.useState)(!1),[D,T]=(0,r.useState)(""),[H,U]=(0,r.useState)(""),[B,F]=(0,r.useState)(""),[Z,q]=(0,r.useState)(!1),[$,J]=(0,r.useState)(null),[V,G]=(0,r.useState)(null),K=(0,r.useMemo)(()=>{var e;return null!==(e=N.find(e=>e.id===_))&&void 0!==e?e:null},[N,_]),Q=(0,r.useMemo)(()=>{var e;return null!==(e=j.find(e=>e.id===S))&&void 0!==e?e:null},[j,S]),X=(0,r.useMemo)(()=>{var e;return null!==(e=y.find(e=>e.id===E))&&void 0!==e?e:null},[y,E]),Y=null!==(b=null==K?void 0:K.duration_minutes)&&void 0!==b?b:30;(0,r.useEffect)(()=>{if(!A||!E)return;let e=new AbortController;z(!0),P([]),L(null);let t=new URLSearchParams({tenantId:v,date:(0,l.WU)(A,"yyyy-MM-dd"),locationId:E,duration:String(Y)});return S&&t.set("providerId",S),fetch("/api/public/availability?".concat(t.toString()),{signal:e.signal}).then(async e=>{if(!e.ok){var t;throw Error(null!==(t=(await e.json().catch(()=>({}))).error)&&void 0!==t?t:"No pudimos cargar la disponibilidad")}return e.json()}).then(e=>{P(Array.isArray(e.slots)?e.slots:[]),J(null)}).catch(t=>{var s;e.signal.aborted||(P([]),J(null!==(s=t.message)&&void 0!==s?s:"No pudimos cargar la disponibilidad"))}).finally(()=>{e.signal.aborted||z(!1)}),()=>e.abort()},[v,A,E,Y,S]);let ee=async()=>{var e,t,s;if(!K||!A||!W||!E){J("Complet\xe1 el servicio, la fecha y el horario");return}if(!D.trim()||!H.trim()){J("Necesitamos el nombre y tel\xe9fono para confirmar");return}q(!0),J(null),G(null);let[a,r]=W.split(":"),i=new Date(A);i.setHours(Number(a),Number(r),0,0);let n={tenantId:v,patient:D.trim(),phone:H.trim(),start:i.toISOString(),duration:Y,service:K.name,notes:B.trim()||null,location_id:E,serviceId:K.id,providerId:S};try{let s=await fetch("/api/public/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),a=await s.json().catch(()=>({}));if(!s.ok)throw Error(null!==(e=a.error)&&void 0!==e?e:"No pudimos reservar el turno");G("\xa1Listo ".concat(null!==(t=D.split(" ")[0])&&void 0!==t?t:"","! Reservamos ").concat(K.name.toLowerCase()," el ").concat((0,l.WU)(i,"dd/MM")," a las ").concat((0,l.WU)(i,"HH:mm")," hs.")),T(""),U(""),F("")}catch(e){J(null!==(s=null==e?void 0:e.message)&&void 0!==s?s:"No pudimos reservar el turno")}finally{q(!1)}},et=Q?Q.full_name:"Cualquier profesional disponible";return(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[2fr,1fr]",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("section",{className:"rounded-3xl border border-white/10 bg-white/10 p-6 shadow-lg shadow-slate-950/20",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-200",children:"Paso 1"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Eleg\xed tu tratamiento"})]}),(0,a.jsx)("span",{className:"text-sm text-slate-300",children:N.length>0?"".concat(N.length," opciones"):"Configur\xe1 servicios en el panel"})]}),0===N.length?(0,a.jsxs)("p",{className:"rounded-2xl border border-dashed border-white/30 p-4 text-sm text-slate-200",children:["Todav\xeda no hay servicios publicados para ",w,"."]}):(0,a.jsx)("div",{className:"grid gap-4 lg:grid-cols-2",children:N.map((e,t)=>(0,a.jsxs)("button",{type:"button",onClick:()=>k(e.id),className:(0,u.cn)("group rounded-2xl border border-white/15 bg-white/5 p-4 text-left transition hover:border-white/40",_===e.id&&"border-white bg-white/20"),children:[(0,a.jsxs)("div",{className:(0,u.cn)("rounded-full px-3 py-1 text-xs font-semibold text-white",x[t%x.length]),children:[e.duration_minutes," min"]}),(0,a.jsx)("p",{className:"mt-3 text-base font-semibold text-white",children:e.name}),e.description&&(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-200 line-clamp-2",children:e.description}),(0,a.jsx)("p",{className:"mt-4 text-sm font-semibold text-slate-50",children:h(e)})]},e.id))})]}),(0,a.jsxs)("section",{className:"grid gap-6 rounded-3xl border border-white/10 bg-white/5 p-6 shadow-lg shadow-slate-950/20 lg:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-200",children:"Paso 2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Eleg\xed qui\xe9n te atiende"}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>C(null),className:(0,u.cn)("rounded-full border border-white/15 px-5 py-2 text-sm text-white transition",!S&&"border-white bg-white/20"),children:"Sin preferencia"}),j.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>C(e.id),className:(0,u.cn)("rounded-full border border-white/15 px-5 py-2 text-sm text-white transition",S===e.id&&"border-white bg-white/20"),children:e.full_name},e.id))]}),(0,a.jsx)("p",{className:"mt-3 text-xs text-slate-200",children:et})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-200",children:"Paso 3"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Sede"}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsx)("select",{className:"w-full rounded-2xl border border-white/20 bg-transparent px-4 py-3 text-sm text-white focus:border-white",value:E,onChange:e=>I(e.target.value),children:y.map(e=>(0,a.jsx)("option",{value:e.id,className:"bg-slate-900 text-white",children:e.name},e.id))}),(null==X?void 0:X.address)&&(0,a.jsx)("p",{className:"text-xs text-slate-200",children:X.address})]})]})]}),(0,a.jsxs)("section",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-white/10 via-white/5 to-transparent p-6 shadow-lg shadow-slate-950/10",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-200",children:"Paso 4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Eleg\xed d\xeda y horario"})]}),(0,a.jsxs)("span",{className:"text-sm text-slate-200",children:[Y," min"]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr,1fr]",children:[(0,a.jsx)(n.f,{mode:"single",selected:A,onSelect:e=>M(null!=e?e:void 0),disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),className:"rounded-2xl border border-white/10 bg-white/5 text-white"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"text-xs text-slate-200",children:"Horarios disponibles"}),(0,a.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:O?(0,a.jsx)("p",{className:"text-sm text-slate-200",children:"Buscando turnos libres..."}):R.length>0?R.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>L(e),className:(0,u.cn)("rounded-full border border-white/15 px-4 py-2 text-sm text-white transition",W===e&&"border-white bg-white/20"),children:[e," hs"]},e)):(0,a.jsx)("p",{className:"text-sm text-slate-200",children:"No hay turnos libres en esta fecha."})})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("section",{className:"rounded-3xl border border-white/10 bg-white/10 p-6 shadow-lg shadow-slate-950/30",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-200",children:"Paso 5"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Tus datos"}),(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsx)(d.I,{placeholder:"Nombre y apellido",value:D,onChange:e=>T(e.target.value),className:"border-white/20 bg-transparent text-white placeholder:text-slate-300"}),(0,a.jsx)(d.I,{placeholder:"WhatsApp",value:H,onChange:e=>U(e.target.value),className:"border-white/20 bg-transparent text-white placeholder:text-slate-300"}),(0,a.jsx)(c.g,{placeholder:"Notas o indicaciones",value:B,onChange:e=>F(e.target.value),className:"min-h-[90px] border-white/20 bg-transparent text-white placeholder:text-slate-300"})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[$&&(0,a.jsx)("p",{className:"rounded-2xl border border-rose-300/40 bg-rose-500/10 px-4 py-2 text-sm text-rose-100",children:$}),V&&(0,a.jsx)("p",{className:"rounded-2xl border border-emerald-300/40 bg-emerald-500/15 px-4 py-2 text-sm text-emerald-100",children:V})]}),(0,a.jsx)(o.z,{type:"button",onClick:ee,disabled:Z,className:"mt-4 h-12 w-full rounded-2xl bg-white text-slate-900 transition hover:translate-y-0.5",children:Z?"Reservando...":"Confirmar turno"})]}),(0,a.jsxs)("section",{className:"rounded-3xl border border-white/10 bg-slate-950/30 p-6",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-200",children:"Resumen"}),(0,a.jsxs)("div",{className:"mt-4 space-y-4 text-sm text-slate-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Tratamiento"}),(0,a.jsx)("p",{className:"text-base font-semibold text-white",children:null!==(f=null==K?void 0:K.name)&&void 0!==f?f:"Eleg\xed un servicio"}),(0,a.jsx)("p",{className:"text-sm text-slate-300",children:h(K)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Profesional"}),(0,a.jsx)("p",{className:"text-base text-white",children:et})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Sede"}),(0,a.jsx)("p",{className:"text-base text-white",children:null!==(g=null==X?void 0:X.name)&&void 0!==g?g:"Sin definir"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Fecha"}),(0,a.jsx)("p",{className:"text-base text-white",children:A?(0,l.WU)(A,"EEEE d 'de' MMMM",{locale:i.es}):"Eleg\xed un d\xeda"}),(0,a.jsx)("p",{className:"text-sm text-slate-300",children:W?"".concat(W," hs"):"Eleg\xed horario"})]})]}),(0,a.jsx)("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-slate-100",children:"Confirmamos por WhatsApp y te recordamos 24 hs antes. Pod\xe9s reprogramar respondiento el mensaje."})]})]})]})}},2381:function(e,t,s){"use strict";s.d(t,{d:function(){return n},z:function(){return o}});var a=s(7437),r=s(535),l=s(2265),i=s(3448);let n=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-brand-600 text-white hover:bg-brand-500",outline:"border border-slate-200 bg-white text-slate-900 hover:bg-slate-50",ghost:"text-slate-600 hover:bg-slate-100",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200",destructive:"bg-red-600 text-white hover:bg-red-500"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3",lg:"h-12 px-6 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"primary",size:"default"}}),o=(0,l.forwardRef)((e,t)=>{let{className:s,variant:r,size:l,...o}=e;return(0,a.jsx)("button",{ref:t,className:(0,i.cn)(n({variant:r,size:l,className:s})),...o})});o.displayName="Button"},6291:function(e,t,s){"use strict";s.d(t,{f:function(){return d}});var a=s(7437);s(2265);var r=s(2451),l=s(407),i=s(827),n=s(3448),o=s(2381);function d(e){let{className:t,classNames:s,showOutsideDays:d=!0,...c}=e;return(0,a.jsx)(i._W,{showOutsideDays:d,className:(0,n.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-slate-500 rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-slate-50 [&:has([aria-selected])]:bg-slate-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-slate-900 text-slate-50 hover:bg-slate-800 hover:text-slate-50 focus:bg-slate-900 focus:text-slate-50",day_today:"bg-slate-100 text-slate-900",day_outside:"day-outside text-slate-400 opacity-50 aria-selected:bg-slate-50 aria-selected:text-slate-500 aria-selected:opacity-30",day_disabled:"text-slate-400 opacity-50",day_range_middle:"aria-selected:bg-slate-100 aria-selected:text-slate-900",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{...t}=e;return(0,a.jsx)(r.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,a.jsx)(l.Z,{className:"h-4 w-4"})}},...c})}d.displayName="Calendar"},279:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var a=s(7437),r=s(2265),l=s(3448);let i=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("input",{ref:t,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-slate-200 bg-white px-3 text-sm text-slate-900 shadow-sm placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",s),...r})});i.displayName="Input"},3675:function(e,t,s){"use strict";s.d(t,{g:function(){return i}});var a=s(7437),r=s(2265),l=s(3448);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});i.displayName="Textarea"},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(1994),r=s(3335);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[851,453,971,117,744],function(){return e(e.s=8395)}),_N_E=e.O()}]);