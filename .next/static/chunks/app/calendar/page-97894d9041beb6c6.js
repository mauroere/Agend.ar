(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{5146:function(e,t,s){Promise.resolve().then(s.bind(s,4642)),Promise.resolve().then(s.bind(s,4342)),Promise.resolve().then(s.bind(s,2572))},401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4642:function(e,t,s){"use strict";s.d(t,{CalendarPageClient:function(){return D}});var a=s(7437),l=s(2265),n=s(9376),i=s(7107),r=s(3292),o=s(279),d=s(2381),c=s(5291),m=s(4291);let x=(0,s(9205).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var u=s(3247),h=s(1817),p=s(401),v=s(7806),f=s(1047),b=s(1723),j=s(6291),g=s(3448),N=s(1012);let y={patient:"",phone:"",date:void 0,time:"",duration:30,service:"",serviceId:void 0,providerId:void 0,notes:""};function w(e){var t,s;let{locations:w,services:C,providers:_,open:S,onOpenChange:k,appointment:I}=e,Z=void 0!==S,[E,P]=(0,l.useState)(null!=S&&S),z=Z?S:E,D=e=>{Z||P(e),null==k||k(e)},[M,T]=(0,l.useState)(y),[U,O]=(0,l.useState)(null!==(s=null===(t=w[0])||void 0===t?void 0:t.id)&&void 0!==s?s:""),[F,H]=(0,l.useState)(!1),[R,W]=(0,l.useState)(null),L=w.length>0,A=(0,n.useRouter)(),q=!!I,[B,K]=(0,l.useState)([]),[G,J]=(0,l.useState)(""),[V,Y]=(0,l.useState)(!1),[$,Q]=(0,l.useState)(!1),X=(0,l.useRef)(null),[ee,et]=(0,l.useState)(!1),[es,ea]=(0,l.useState)([]),[el,en]=(0,l.useState)(!1),ei=(0,l.useMemo)(()=>C.find(e=>e.id===M.serviceId),[C,M.serviceId]),er=(0,l.useMemo)(()=>{let e=_.filter(e=>!e.default_location_id||e.default_location_id===U);return e.length>0?e:_},[_,U]),eo=(0,l.useMemo)(()=>_.find(e=>e.id===M.providerId),[_,M.providerId]),ed=(0,l.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.trim();if(t.length<2){K([]);return}Q(!0);try{let e=await fetch("/api/patients?limit=5&q=".concat(encodeURIComponent(t)));if(e.ok){var s;let t=await e.json();K((null!==(s=t.patients)&&void 0!==s?s:[]).map(e=>({id:e.id,label:e.full_name,phone:e.phone_e164})))}}catch(e){console.error(e),K([])}finally{Q(!1)}},[]);(0,l.useEffect)(()=>{if(!V)return;let e=e=>{X.current&&!X.current.contains(e.target)&&Y(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[V]),(0,l.useEffect)(()=>{z||Y(!1)},[z]),(0,l.useEffect)(()=>{Z&&P(null!=S&&S)},[S,Z]),(0,l.useEffect)(()=>{var e,t,s,a,l;I?(T({patient:I.patient,phone:I.phone,date:I.start,time:(0,i.WU)(I.start,"HH:mm"),duration:I.durationMinutes,service:I.service||"",serviceId:I.serviceId,providerId:I.providerId,notes:I.notes||""}),O(null!==(s=null!==(t=I.locationId)&&void 0!==t?t:null===(e=w[0])||void 0===e?void 0:e.id)&&void 0!==s?s:"")):(T({...y}),O(null!==(l=null===(a=w[0])||void 0===a?void 0:a.id)&&void 0!==l?l:"")),W(null),ea([]),J(I?I.patient:"")},[I,w,z]),(0,l.useEffect)(()=>{if(!M.date||!U||!z)return;let e=async()=>{en(!0),ea([]);try{let e=(0,i.WU)(M.date,"yyyy-MM-dd"),t=new URLSearchParams({date:e,locationId:U,duration:M.duration.toString()});M.providerId&&t.set("providerId",M.providerId);let s=await fetch("/api/availability?".concat(t));if(s.ok){let e=await s.json();ea(e.slots||[])}}catch(e){console.error(e)}finally{en(!1)}};M.date&&e()},[M.date,M.duration,M.providerId,U,z]);let ec=(e,t)=>{T(s=>({...s,[e]:t}))},em=e=>{ec("patient",e.label),ec("phone",e.phone),J(e.label),Y(!1)},ex=(0,l.useCallback)(e=>null===e.price_minor_units?"Consultar":new Intl.NumberFormat("es-AR",{style:"currency",currency:e.currency,minimumFractionDigits:0}).format(e.price_minor_units/100),[]),eu=e=>{T(t=>({...t,serviceId:e.id,service:e.name,duration:e.duration_minutes}))},eh=e=>{T(t=>({...t,providerId:e.id})),!I&&e.default_location_id&&O(e.default_location_id)},ep=async e=>{if(e.preventDefault(),!L)return W("Falta configurar Consultorio");if(!M.patient)return W("Seleccione un paciente");if(!M.date||!M.time)return W("Seleccione fecha y hora");let t="";if(!M.date||!M.time)return W("Fecha inv\xe1lida");{let[e,s]=M.time.split(":"),a=new Date(M.date);a.setHours(Number(e),Number(s),0,0),t=a.toISOString()}H(!0),W(null);try{let e=I?"/api/appointments/".concat(I.id):"/api/appointments",a={patient:M.patient,phone:M.phone,start:t,duration:M.duration,service:M.service,notes:M.notes,location_id:U};M.serviceId&&(a.serviceId=M.serviceId),M.providerId&&(a.providerId=M.providerId);let l=await fetch(e,{method:I?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await l.json();if(!l.ok){var s;W(null!==(s=n.error)&&void 0!==s?s:"Error al guardar");return}D(!1),A.refresh()}catch(e){W("Error inesperado.")}finally{H(!1)}};return void 0!==S||z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Vq,{open:z,onOpenChange:D,children:(0,a.jsxs)(m.cZ,{className:"max-w-4xl max-h-[95vh] overflow-y-auto w-full p-0 gap-0",children:[(0,a.jsx)("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:(0,a.jsxs)(m.fK,{children:[(0,a.jsx)(m.$N,{className:"text-xl text-slate-900",children:q?"Editar Turno":"Agendar Nuevo Turno"}),(0,a.jsx)(m.Be,{className:"text-slate-500",children:"Complete la informaci\xf3n del paciente y seleccione un bloque horario."})]})}),(0,a.jsxs)("form",{onSubmit:ep,className:"flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-slate-100",children:[(0,a.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[R&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 text-sm text-red-600 bg-red-50 border border-red-100 rounded-lg",children:[(0,a.jsx)(x,{className:"h-4 w-4"}),R]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Paciente"}),(0,a.jsx)(d.z,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 text-xs text-brand-600",onClick:()=>{Y(!1),et(!0)},children:"+ Nuevo Paciente"})]}),(0,a.jsxs)("div",{ref:X,className:"relative",children:[(0,a.jsx)(u.Z,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,a.jsx)(o.I,{value:G,placeholder:"Buscar por nombre o tel\xe9fono...",className:"pl-10 pr-3",onFocus:()=>{Y(!0),G.trim().length>=2&&ed(G)},onChange:e=>{let t=e.target.value;J(t),Y(!0),M.patient&&(ec("patient",""),ec("phone","")),t.trim().length>=2?ed(t):K([])}}),V&&(0,a.jsxs)("div",{className:"absolute left-0 right-0 top-full z-[60] mt-2 rounded-xl border border-slate-200 bg-white shadow-2xl",children:[(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto py-1",children:$?(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-3 text-sm text-slate-500",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 animate-spin"}),"Buscando pacientes..."]}):G.trim().length<2?(0,a.jsx)("p",{className:"px-4 py-3 text-sm text-slate-500",children:"Ingrese al menos 2 caracteres para buscar."}):0===B.length?(0,a.jsx)("p",{className:"px-4 py-3 text-sm text-slate-500",children:"No encontramos coincidencias."}):(0,a.jsx)("ul",{className:"divide-y divide-slate-100",children:B.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{type:"button",className:(0,g.cn)("flex w-full items-start gap-3 px-4 py-3 text-left hover:bg-slate-50",M.patient===e.label&&"bg-slate-50"),onClick:()=>em(e),children:[(0,a.jsxs)("div",{className:"flex flex-col text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-slate-900",children:e.label}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:e.phone})]}),M.patient===e.label&&(0,a.jsx)(p.Z,{className:"ml-auto h-4 w-4 text-slate-400"})]})},e.id))})}),(0,a.jsx)("div",{className:"border-t px-3 py-2",children:(0,a.jsxs)(d.z,{type:"button",variant:"secondary",className:"w-full",onClick:()=>{Y(!1),et(!0)},children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Crear nuevo paciente"]})})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.I,{value:M.phone,onChange:e=>ec("phone",e.target.value),placeholder:"+54 9 11...",className:"pl-8 text-sm"}),(0,a.jsx)("span",{className:"absolute left-2.5 top-2.5 text-slate-400",children:(0,a.jsx)(x,{className:"h-4 w-4"})})]})]}),C.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Tratamiento"}),ei&&(0,a.jsx)("span",{className:"text-xs text-slate-500",children:ex(ei)})]}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[C.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>eu(e),className:(0,g.cn)("rounded-2xl border bg-white p-4 text-left shadow-sm transition hover:-translate-y-0.5",M.serviceId===e.id?"border-brand-500 ring-2 ring-brand-200":"border-slate-200"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-base font-semibold text-slate-900",children:e.name}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-600",children:ex(e)})]}),e.description&&(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-500 line-clamp-2",children:e.description}),(0,a.jsxs)("p",{className:"mt-3 text-xs uppercase tracking-wide text-slate-400",children:[e.duration_minutes," minutos"]})]},e.id)),0===C.length&&(0,a.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-200 p-4 text-sm text-slate-500",children:"Agreg\xe1 servicios en Configuraci\xf3n para mostrarlos ac\xe1."})]})]}),_.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Profesional"}),eo&&(0,a.jsx)("span",{className:"text-xs text-slate-500",children:eo.default_location_id?"Ubicaci\xf3n sugerida":"Libre"})]}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[er.map(e=>{var t,s,l;return(0,a.jsxs)("button",{type:"button",onClick:()=>eh(e),className:(0,g.cn)("rounded-2xl border bg-white p-4 text-left shadow-sm transition",M.providerId===e.id?"border-brand-500 ring-2 ring-brand-200":"border-slate-200"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full text-sm font-semibold text-white",style:{background:null!==(s=e.color)&&void 0!==s?s:"#0ea5e9"},children:e.full_name.split(" ").map(e=>e[0]).slice(0,2).join("")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.full_name}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:e.default_location_id?null!==(l=null===(t=w.find(t=>t.id===e.default_location_id))||void 0===t?void 0:t.name)&&void 0!==l?l:"":"Cualquier sede"})]})]}),e.bio&&(0,a.jsx)("p",{className:"mt-2 text-xs text-slate-500 line-clamp-2",children:e.bio})]},e.id)}),0===er.length&&(0,a.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-200 p-4 text-sm text-slate-500",children:"No hay profesionales activos para esta sede."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Duraci\xf3n"}),(0,a.jsxs)(c.P,{value:M.duration.toString(),onChange:e=>ec("duration",Number(e.target.value)),children:[(0,a.jsx)("option",{value:"15",children:"15 min"}),(0,a.jsx)("option",{value:"30",children:"30 min"}),(0,a.jsx)("option",{value:"45",children:"45 min"}),(0,a.jsx)("option",{value:"60",children:"1 hora"}),(0,a.jsx)("option",{value:"90",children:"1.5 horas"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Servicio"}),(0,a.jsxs)(c.P,{value:M.service,onChange:e=>ec("service",e.target.value),children:[(0,a.jsx)("option",{value:"Consulta",children:"Consulta"}),(0,a.jsx)("option",{value:"Tratamiento",children:"Tratamiento"}),(0,a.jsx)("option",{value:"Control",children:"Control"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Consultorio"}),(0,a.jsx)(c.P,{value:U,onChange:e=>O(e.target.value),disabled:!L,children:w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Notas"}),(0,a.jsx)("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-slate-200 bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Detalles adicionales...",value:M.notes,onChange:e=>ec("notes",e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 p-6 bg-slate-50/30 flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"})," Fecha"]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-slate-200 p-2 shadow-sm self-center sm:self-start w-full flex justify-center",children:(0,a.jsx)(j.f,{mode:"single",locale:r.es,selected:M.date,onSelect:e=>ec("date",e),disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 min-h-[200px]",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"})," Horarios Disponibles",el&&(0,a.jsx)(h.Z,{className:"h-3 w-3 animate-spin text-slate-400"})]}),M.date?0!==es.length||el?(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2 content-start",children:es.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>ec("time",e),className:(0,g.cn)("text-sm font-medium py-2 px-1 rounded-md border transition-all relative",M.time===e?"bg-slate-900 text-white border-slate-900 shadow-md transform scale-105 z-10":"bg-white text-slate-600 border-slate-200 hover:border-slate-400 hover:bg-slate-50"),children:e},e))}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1 border border-slate-200 rounded-lg p-6 bg-white",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600 font-medium",children:"No hay turnos disponibles."}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Pruebe cambiar la duraci\xf3n o el d\xeda."})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1 border-2 border-dashed border-slate-200 rounded-lg p-6 bg-slate-50/50",children:[(0,a.jsx)(f.Z,{className:"h-8 w-8 text-slate-300 mb-2"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 text-center",children:"Seleccione un d\xeda para ver horarios."})]})]})]})]}),(0,a.jsxs)("div",{className:"p-4 border-t bg-slate-50 flex justify-end gap-2",children:[(0,a.jsx)(d.z,{type:"button",variant:"ghost",onClick:()=>D(!1),children:"Cancelar"}),(0,a.jsxs)(d.z,{type:"submit",onClick:ep,disabled:F||!M.date||!M.time,children:[F&&(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),q?"Guardar Cambios":"Confirmar Turno"]})]})]})}),ee&&(0,a.jsx)(N.C,{onClose:()=>et(!1),onSuccess:e=>{e&&em({id:e.id,label:e.full_name,phone:e.phone_e164}),et(!1)}})]}):(0,a.jsx)(d.z,{onClick:()=>D(!0),children:I?"Editar turno":"+ Turno"})}var C=s(9121),_=s(5696),S=s(9174),k=s(9820),I=s(2451),Z=s(407),E=s(9397);let P={pending:{label:"Pendiente",color:"pending"},confirmed:{label:"Confirmado",color:"confirmed"},reschedule_requested:{label:"Reprogramar",color:"risk"},canceled:{label:"Cancelado",color:"canceled"},completed:{label:"Atendido",color:"attended"},no_show:{label:"No show",color:"noshow"}};function z(e){var t,s,n,o,c,m;let{appointments:x,onCreate:u,onSelect:h}=e,[p,v]=(0,l.useState)(0),j=(0,l.useMemo)(()=>{let e=(0,C.E)((0,_.z)(new Date,{weekStartsOn:1}),7*p);return Array.from({length:7},(t,s)=>(0,C.E)(e,s))},[p]),N=(0,l.useMemo)(()=>j.map(e=>({day:e,items:x.filter(t=>t.start.toDateString()===e.toDateString())})),[x,j]);return(0,a.jsxs)(k.Zb,{className:"h-full border-none shadow-none sm:border sm:shadow-sm",children:[(0,a.jsxs)(k.Ol,{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0 pb-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(k.ll,{className:"capitalize",children:(0,i.WU)(null!==(o=null===(t=N[0])||void 0===t?void 0:t.day)&&void 0!==o?o:new Date,"MMMM yyyy",{locale:r.es})}),(0,a.jsxs)(k.SZ,{children:["Semana del ",(0,i.WU)(null!==(c=null===(s=N[0])||void 0===s?void 0:s.day)&&void 0!==c?c:new Date,"d",{locale:r.es})," al ",(0,i.WU)(null!==(m=null===(n=N[6])||void 0===n?void 0:n.day)&&void 0!==m?m:new Date,"d",{locale:r.es})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center bg-slate-100 rounded-md p-0.5",children:[(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>v(e=>e-1),children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})}),(0,a.jsx)(d.z,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs font-medium",onClick:()=>v(0),children:"Hoy"}),(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>v(e=>e+1),children:(0,a.jsx)(Z.Z,{className:"h-4 w-4"})})]}),u&&(0,a.jsxs)(d.z,{onClick:u,size:"sm",children:[(0,a.jsx)(E.Z,{className:"mr-2 h-4 w-4"})," Nuevo Turno"]})]})]}),(0,a.jsx)(k.aY,{className:"p-0 sm:p-6 pt-0",children:(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-7",children:N.map(e=>{let{day:t,items:s}=e,l=t.toDateString()===new Date().toDateString();return(0,a.jsxs)("div",{className:(0,g.cn)("flex flex-col min-h-[300px] rounded-lg border bg-slate-50/50",l?"border-blue-200 bg-blue-50/30":"border-slate-200"),children:[(0,a.jsxs)("div",{className:(0,g.cn)("p-3 text-center border-b",l?"bg-blue-100/50 border-blue-200":"bg-white border-slate-200 rounded-t-lg"),children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:(0,i.WU)(t,"EEEE",{locale:r.es})}),(0,a.jsx)("p",{className:(0,g.cn)("text-lg font-bold mt-0.5",l?"text-blue-600":"text-slate-900"),children:(0,i.WU)(t,"d",{locale:r.es})})]}),(0,a.jsxs)("div",{className:"flex-1 p-2 space-y-2",children:[0===s.length&&(0,a.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 gap-2 min-h-[100px]",children:(0,a.jsx)(f.Z,{className:"h-8 w-8 opacity-20"})}),s.sort((e,t)=>e.start.getTime()-t.start.getTime()).map(e=>(0,a.jsxs)("div",{className:"group relative flex flex-col gap-2 rounded-md border border-slate-200 bg-white p-3 shadow-sm transition-all hover:shadow-md hover:border-slate-300 cursor-pointer",onClick:()=>null==h?void 0:h(e),role:"button",tabIndex:0,onKeyDown:t=>"Enter"===t.key&&(null==h?void 0:h(e)),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(S.C,{label:P[e.status].label,color:P[e.status].color}),(0,a.jsx)("span",{className:"text-xs text-slate-400 font-mono",children:(0,i.WU)(e.start,"HH:mm")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-900 truncate",title:e.patient,children:e.patient}),e.service&&(0,a.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.service})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-slate-400 mt-1 pt-2 border-t border-slate-50",children:[(0,a.jsx)(b.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.durationMinutes," min"]})]})]},e.id))]})]},t.toISOString())})})})]})}function D(e){let{appointments:t,locations:s,services:n,providers:i}=e,[r,o]=(0,l.useState)(!1),[d,c]=(0,l.useState)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z,{appointments:t,onCreate:()=>{c(null),o(!0)},onSelect:e=>{c(e),o(!0)}}),(0,a.jsx)("div",{className:"fixed bottom-8 right-8",children:(0,a.jsx)(w,{locations:s,services:n,providers:i,open:r,onOpenChange:e=>{o(e),e||c(null)},appointment:null!=d?d:void 0})})]})}},2572:function(e,t,s){"use strict";s.d(t,{LocationSwitcher:function(){return r}});var a=s(7437),l=s(2265),n=s(9376),i=s(5291);function r(e){let{locations:t,activeId:s}=e,r=(0,n.useRouter)(),o=(0,n.useSearchParams)(),[d,c]=(0,l.useTransition)();return t.length<=1?null:(0,a.jsx)(i.P,{value:s,onChange:e=>{var t;return t=e.target.value,void c(()=>{let e=new URLSearchParams(o.toString());e.set("location",t),r.push("?".concat(e.toString()))})},disabled:d,children:t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})}},6291:function(e,t,s){"use strict";s.d(t,{f:function(){return d}});var a=s(7437);s(2265);var l=s(2451),n=s(407),i=s(827),r=s(3448),o=s(2381);function d(e){let{className:t,classNames:s,showOutsideDays:d=!0,...c}=e;return(0,a.jsx)(i._W,{showOutsideDays:d,className:(0,r.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,r.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-slate-500 rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-slate-50 [&:has([aria-selected])]:bg-slate-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,r.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-slate-900 text-slate-50 hover:bg-slate-800 hover:text-slate-50 focus:bg-slate-900 focus:text-slate-50",day_today:"bg-slate-100 text-slate-900",day_outside:"day-outside text-slate-400 opacity-50 aria-selected:bg-slate-50 aria-selected:text-slate-500 aria-selected:opacity-30",day_disabled:"text-slate-400 opacity-50",day_range_middle:"aria-selected:bg-slate-100 aria-selected:text-slate-900",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{...t}=e;return(0,a.jsx)(l.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,a.jsx)(n.Z,{className:"h-4 w-4"})}},...c})}d.displayName="Calendar"},5291:function(e,t,s){"use strict";s.d(t,{P:function(){return n}});var a=s(7437),l=s(3448);function n(e){let{className:t,children:s,...n}=e;return(0,a.jsx)("select",{className:(0,l.cn)("flex h-10 w-full rounded-lg border border-slate-200 bg-white px-3 text-sm text-slate-900 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",t),...n,children:s})}}},function(e){e.O(0,[851,679,641,453,118,971,117,744],function(){return e(e.s=5146)}),_N_E=e.O()}]);