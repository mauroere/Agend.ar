"use strict";(()=>{var e={};e.id=4128,e.ids=[4128],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},8679:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>x,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var s={};n.r(s),n.d(s,{POST:()=>u});var r=n(9303),a=n(8716),o=n(670),i=n(7070),p=n(3837);async function u(e,{params:t}){let n=(0,p.j)(),{data:s}=await n.auth.getSession(),r=s.session?.user?.app_metadata?.tenant_id??s.session?.user?.user_metadata?.tenant_id??null,a=e.headers.get("x-tenant-id"),o=r??a;if(!s.session||!o)return i.NextResponse.json({error:"Unauthorized"},{status:401});if(a&&r&&a!==r)return i.NextResponse.json({error:"Tenant mismatch"},{status:403});let u=t.id;if(!u)return i.NextResponse.json({error:"Missing appointment id"},{status:400});let{error:d}=await n.from("agenda_appointments").update({status:"canceled"}).eq("id",u).eq("tenant_id",o);return d?i.NextResponse.json({error:d.message},{status:400}):i.NextResponse.json({ok:!0})}let d=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/appointments/[id]/cancel/route",pathname:"/api/appointments/[id]/cancel",filename:"route",bundlePath:"app/api/appointments/[id]/cancel/route"},resolvedPagePath:"C:\\Users\\rementeriama\\Downloads\\Code\\Agend.ar\\src\\app\\api\\appointments\\[id]\\cancel\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:m}=d,x="/api/appointments/[id]/cancel/route";function g(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},3837:(e,t,n)=>{n.d(t,{j:()=>a});var s=n(1615),r=n(344);function a(){return(0,r.createRouteHandlerClient)({cookies:s.cookies})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[9276,7857,5972,958],()=>n(8679));module.exports=s})();