"use strict";(()=>{var e={};e.id=5220,e.ids=[5220],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},9310:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>m});var r={};n.r(r),n.d(r,{POST:()=>u});var s=n(9303),a=n(8716),o=n(670),i=n(7070),p=n(3837);async function u(e,{params:t}){let n=(0,p.j)(),{data:r}=await n.auth.getSession(),s=r.session?.user?.app_metadata?.tenant_id??r.session?.user?.user_metadata?.tenant_id??null,a=e.headers.get("x-tenant-id"),o=s??a;if(!r.session||!o)return i.NextResponse.json({error:"Unauthorized"},{status:401});if(a&&s&&a!==s)return i.NextResponse.json({error:"Tenant mismatch"},{status:403});let u=t.id;if(!u)return i.NextResponse.json({error:"Missing appointment id"},{status:400});let{error:d}=await n.from("agenda_appointments").update({status:"confirmed"}).eq("id",u).eq("tenant_id",o);return d?i.NextResponse.json({error:d.message},{status:400}):i.NextResponse.json({ok:!0})}let d=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/appointments/[id]/confirm/route",pathname:"/api/appointments/[id]/confirm",filename:"route",bundlePath:"app/api/appointments/[id]/confirm/route"},resolvedPagePath:"C:\\Users\\rementeriama\\Downloads\\Code\\Agend.ar\\src\\app\\api\\appointments\\[id]\\confirm\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:l}=d,x="/api/appointments/[id]/confirm/route";function f(){return(0,o.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:m})}},3837:(e,t,n)=>{n.d(t,{j:()=>a});var r=n(1615),s=n(344);function a(){return(0,s.createRouteHandlerClient)({cookies:r.cookies})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[9276,7857,5972,958],()=>n(9310));module.exports=r})();